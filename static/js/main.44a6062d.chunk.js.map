{"version":3,"sources":["components/Header.js","components/Footer.js","components/Profile.js","contexts/CurrentUserContext.js","components/Card.js","components/CardsSection.js","components/Main.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/Api.js","components/App.js","index.js"],"names":["Header","className","Footer","currentDate","Date","getFullYear","Profile","props","onClick","onEditAvatar","src","currentUser","avatar","alt","name","type","onEditProfile","about","onAddPlace","CurrentUserContext","React","createContext","Card","useContext","card","owner","_id","onCardDelete","link","onCardClick","likes","some","i","onCardLike","length","CardsSection","children","Main","cards","map","PopupWithForm","isOpen","onClose","e","stopPropagation","title","method","onSubmit","buttonText","EditProfilePopup","useState","setName","description","setDescription","useEffect","preventDefault","onUpdateUser","placeholder","id","minLength","maxLength","required","value","onChange","target","EditAvatarPopup","inputAvatarUrlRef","useRef","current","onUpdateAvatar","ref","AddPlacePopup","setLink","ImagePopup","data","api","config","this","_baseUrl","baseUrl","_headers","headers","fetch","then","res","_handleResponse","ok","json","Promise","reject","status","body","JSON","stringify","cardId","isLiked","_makeUnlike","_makeLike","authorization","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","cardToDelete","isCardDeleteConfirmOpen","setIsCardDeleteConfirmOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","closeAllPopups","all","getInitialCards","getUserInfo","catch","error","console","log","closeByEscape","event","key","document","addEventListener","removeEventListener","Provider","changeLikeCardStatus","newCard","state","c","editUserInfo","onOvelayClick","editUserAvatar","postCard","deleteCard","filter","handleCardDelete","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.44a6062d.chunk.js","sourcesContent":["function Header() {\n  return (\n    <header className=\"header\">\n      <div className=\"header__logo\"></div>\n    </header>\n  )\n}\n\nexport default Header;\n","function Footer() {\n  const currentDate = new Date()\n  return (\n  <footer className=\"footer\">\n    <p className=\"footer__copyright\">&copy; {currentDate.getFullYear()}. Mesto Russia. Иван Цыпкин</p>\n  </footer>\n  )\n}\n\nexport default Footer;\n","export default function Profile(props) {\n  return (\n    <section className=\"profile\">\n      <div className=\"profile__avatar-container\" onClick={props.onEditAvatar}>\n        <img\n          src={props.currentUser.avatar}\n          alt=\"Аватар пользователя\"\n          className=\"profile__avatar\"\n        />\n      </div>\n      <div className=\"profile__info\">\n        <h1 className=\"profile__name\">{props.currentUser.name}</h1>\n        <button\n          type=\"button\"\n          className=\"profile__edit-button\"\n          aria-label=\"Редактировать профиль\"\n          onClick={props.onEditProfile}\n        ></button>\n        <p className=\"profile__job\">{props.currentUser.about}</p>\n      </div>\n      <button\n        type=\"button\"\n        className=\"profile__add-button\"\n        aria-label=\"Добавить место\"\n        onClick={props.onAddPlace}\n      ></button>\n    </section>\n  )\n}\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();\n","import { useContext } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nexport default function Card(props) {\n\n  const currentUser = useContext(CurrentUserContext);\n\n  return (\n    <li className=\"cards__item\">\n      {(props.card.owner._id === currentUser._id) &&\n        <button\n          type=\"button\"\n          className=\"cards__remove-button\"\n          aria-label=\"Удалить карточку\"\n          onClick = {() => props.onCardDelete(props.card)}\n        ></button>\n      }\n      <img\n        src = {props.card.link}\n        alt = {props.card.name}\n        className=\"cards__image\"\n        onClick = {() => props.onCardClick(props.card)}\n      />\n      <div className=\"cards__caption\">\n        <h2 className=\"cards__image-caption\">{props.card.name}</h2>\n        <div className=\"cards__likes\">\n          <button\n            type=\"button\"\n            className={`cards__like-button ${(props.card.likes.some(i => i._id === currentUser._id)) ? 'cards__like-button_active' : ''}`}\n            aria-label=\"Поставить лайк\"\n            onClick={()=> props.onCardLike(props.card)}\n          ></button>\n          <span className=\"cards__likes-number\">{props.card.likes.length ? props.card.likes.length : ''}</span>\n        </div>\n      </div>\n    </li>\n  )\n}\n","export default function CardsSection(props) {\n  return (\n    <section className=\"cards\">\n      <ul className=\"cards__list\">\n        {props.children}\n      </ul>\n    </section>\n  )\n}\n","import Profile from './Profile';\nimport Card from './Card';\nimport CardsSection from './CardsSection';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { useContext } from 'react';\n\n\nexport default function Main(props) {\n\n  const currentUser = useContext(CurrentUserContext);\n\n  return (\n    <main className=\"main\">\n      <Profile\n        currentUser = {currentUser}\n        {...props}\n      />\n      <CardsSection>\n        {props.cards.map(card => {\n            return (<Card\n              key = {card._id}\n              card = {card}\n              onCardDelete = {props.onCardDelete}\n              onCardClick = {props.onCardClick}\n              onCardLike = {props.onCardLike}\n\n            />)\n          })\n        }\n      </CardsSection>\n    </main>\n  )\n}\n","export default function PopupWithForm(props) {\n  return (\n    <div\n      className={`popup popup_type_${props.name} ${props.isOpen ? 'popup_opened' : ''}`}\n      onClick = {props.onClose}\n    >\n      <div className=\"popup__container\" onClick = {(e) => e.stopPropagation()}>\n        <button\n          type=\"button\"\n          className=\"popup__close-button\"\n          aria-label=\"Закрыть окно\"\n          onClick={props.onClose}\n        ></button>\n        <h3 className=\"popup__heading\">{props.title}</h3>\n        <form\n          className={`popup__form popup__form_type_${props.name}`}\n          method=\"POST\"\n          name={props.name}\n          onSubmit={props.onSubmit}\n        >\n          {props.children}\n          <button\n            type=\"submit\"\n            className=\"popup__submit-button\"\n            aria-label=\"Отправить данные\"\n          >{props.buttonText}</button>\n        </form>\n      </div>\n    </div>\n  )\n}\n","import { useState, useContext, useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nexport default function EditProfilePopup(props) {\n\n  const currentUser = useContext(CurrentUserContext);\n\n  const [name, setName] = useState(currentUser.name);\n  const [description, setDescription] = useState(currentUser.about);\n\n  useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"edit\"\n      title=\"Редактировать профиль\"\n      isOpen = {props.isOpen}\n      onClose = {props.onClose}\n      buttonText=\"Сохранить\"\n      onSubmit = {handleSubmit}\n    >\n      <input\n        type=\"text\"\n        className=\"popup__form-item popup__form-item_value_name\"\n        placeholder=\"Имя\"\n        name=\"userName\"\n        id=\"user-name\"\n        minLength=\"2\"\n        maxLength=\"40\"\n        required\n        value={name || ''}\n        onChange={(e) => setName(e.target.value)}\n      />\n      <span className=\"user-name-error popup__form-error-msg\"></span>\n      <input\n        type=\"text\"\n        className=\"popup__form-item popup__form-item_value_job\"\n        placeholder=\"Род деятельности\"\n        name=\"userJob\"\n        id=\"user-job\"\n        minLength=\"2\"\n        maxLength=\"200\"\n        required\n        value={description || ''}\n        onChange={(e) => setDescription(e.target.value)}\n      />\n      <span className=\"user-job-error popup__form-error-msg popup__form-error-msg_pos_bottom\"></span>\n    </PopupWithForm>\n  )\n}\n","import { useRef, useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\n\nexport default function EditAvatarPopup(props) {\n\n  const inputAvatarUrlRef = useRef();\n\n  useEffect(() => {\n    inputAvatarUrlRef.current.value = '';\n  }, [props.isOpen])\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar({\n      avatar: inputAvatarUrlRef.current.value\n    });\n  }\n\n\n  return (\n    <PopupWithForm\n      name=\"edit-avatar\"\n      title=\"Обновить аватар\"\n      isOpen={props.isOpen}\n      onClose = {props.onClose}\n      buttonText=\"Сохранить\"\n      onSubmit={handleSubmit}\n    >\n      <input\n        ref={inputAvatarUrlRef}\n        type=\"url\"\n        className=\"popup__form-item popup__form-item_value_link\"\n        placeholder=\"Ссылка на аватар\"\n        name=\"avatarLink\"\n        id=\"avatar-link\"\n        required/>\n      <span className=\"avatar-link-error popup__form-error-msg\"></span>\n    </PopupWithForm>\n  )\n}\n","import { useState, useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\n\nexport default function AddPlacePopup(props) {\n\n  const [link, setLink] = useState('');\n  const [name, setName] = useState('');\n\n  useEffect(() => {\n    setLink('');\n    setName('')\n  }, [props.isOpen])\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onAddPlace({\n      link,\n      name\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"new-card\"\n      title=\"Новое место\"\n      isOpen = {props.isOpen}\n      onClose = {props.onClose}\n      buttonText=\"Создать\"\n      onSubmit={handleSubmit}\n    >\n      <input\n        type=\"text\"\n        className=\"popup__form-item popup__form-item_value_pic-name\"\n        placeholder=\"Название\"\n        name=\"picName\"\n        id=\"pic-name\"\n        minLength=\"2\"\n        maxLength=\"30\"\n        required\n        value={name}\n        onChange={(e) => setName(e.target.value)}\n      />\n      <span className=\"pic-name-error popup__form-error-msg\"></span>\n      <input\n        type=\"url\"\n        className=\"popup__form-item popup__form-item_value_link\"\n        placeholder=\"Ссылка на картинку\"\n        name=\"picLink\"\n        id=\"pic-link\"\n        required\n        value={link}\n        onChange={(e) => setLink(e.target.value)}\n      />\n      <span className =\"pic-link-error popup__form-error-msg popup__form-error-msg_pos_bottom\"></span>\n    </PopupWithForm>\n  )\n}\n","export default function ImagePopup(props) {\n  return (\n    <div\n      className={`popup popup_type_image ${props.isOpen ? 'popup_opened' : ''}`}\n      onClick = {props.onClose}\n    >\n      <figure className=\"popup__figure\" onClick = {(e) => e.stopPropagation()}>\n        <button\n          type=\"button\"\n          className=\"popup__close-button\"\n          aria-label=\"Закрыть окно\"\n          onClick={props.onClose}\n        ></button>\n        <img src={props.data.link} alt={props.data.name} className=\"popup__image\"/>\n        <figcaption className=\"popup__caption\">{props.data.name}</figcaption>\n      </figure>\n    </div>\n  )\n}\n","class Api {\n  constructor(config) {\n    this._baseUrl = config.baseUrl;\n    this._headers = config.headers\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n    method: 'GET',\n    headers: this._headers\n    })\n      .then(res => this._handleResponse(res))\n  }\n\n  _handleResponse(res) {\n    if (res.ok) {return res.json()}\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'GET',\n      headers: this._headers}\n    )\n      .then(res => this._handleResponse(res))\n  }\n\n  editUserInfo(data) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    })\n      .then(res => this._handleResponse(res))\n  }\n\n  editUserAvatar(data) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: data.avatar,\n      })\n    })\n      .then(res => this._handleResponse(res))\n  }\n\n  postCard(data) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    })\n      .then(res => this._handleResponse(res))\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n      })\n        .then(res => this._handleResponse(res))\n  }\n\n  _makeLike(cardId) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: this._headers\n      })\n        .then(res => this._handleResponse(res))\n  }\n\n  _makeUnlike(cardId) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n      })\n        .then(res => this._handleResponse(res))\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    if (isLiked) {\n      return this._makeUnlike(cardId)\n    } else {\n      return this._makeLike(cardId)\n    }\n  }\n\n}\n\nconst configApi = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-26',\n  headers: {\n    authorization: 'a37d820a-4f35-49a2-9bb2-cba80f833b0c',\n    'Content-Type': 'application/json'\n  }\n}\n\nexport const api = new Api(configApi);\n","import '../index.css';\nimport Header from './Header';\nimport Footer from './Footer';\nimport Main from './Main';\nimport PopupWithForm from './PopupWithForm';\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport ImagePopup from './ImagePopup';\nimport { api } from '../utils/Api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { useState, useEffect } from 'react';\n\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isCardDeleteConfirmOpen, setIsCardDeleteConfirmOpen] = useState({isOpen: false, cardToDelete: {}});\n  const [selectedCard, setSelectedCard] = useState({isOpen: false, data: {}})\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n\n  useEffect(() => {\n    Promise.all([\n      api.getInitialCards(),\n      api.getUserInfo()\n    ])\n      .then(res => {\n        setCards(res[0]);\n        setCurrentUser(res[1]);\n      })\n      .catch(error => console.log(error))\n  }, [])\n\n  useEffect(() => {\n    const closeByEscape = (event) => {\n      if (event.key === 'Escape') {\n        closeAllPopups();\n      }\n    }\n    document.addEventListener('keydown', closeByEscape)\n    return () => document.removeEventListener('keydown', closeByEscape)\n  }, [])\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsCardDeleteConfirmOpen({isOpen: false, cardToDelete: {}});\n    setSelectedCard({isOpen: false, data: selectedCard.data}); //Если очистить data при закрытии, то появляется неприятное искажение анимации закрытия: удаляется картинка и крестик закрытия перемещается в центр, а потом затухает\n  }\n\n  function handleCardClick(data) {\n    setSelectedCard(\n      {\n        isOpen: true,\n        data: {\n          link: data.link,\n          name: data.name\n        }\n      }\n    )\n  }\n\n  function handleUpdateUser(data) {\n    api.editUserInfo(data)\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(error => console.log(error))\n  }\n\n  function handleUpdateAvatar(data) {\n    api.editUserAvatar(data)\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(error => console.log(error))\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch(error => console.log(error));\n  }\n\n  function handleCardDelete(e, card) {\n    e.preventDefault();\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards(cards => cards.filter(c => c._id !== card._id));\n        closeAllPopups();\n      })\n      .catch(error => console.log(error))\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api.postCard(data)\n    .then(res => {\n      setCards([res, ...cards]);\n      closeAllPopups();\n    })\n    .catch(error => console.log(error))\n  }\n\n  function handleCardDeleteConfirm(card) {\n    setIsCardDeleteConfirmOpen({isOpen: true, cardToDelete: {...card}})\n  }\n\n\n  return (\n    <div className=\"page\">\n      <div className=\"page__content\">\n        <CurrentUserContext.Provider value = {currentUser}>\n\n          <Header />\n\n          <Main\n            onEditProfile = {() => setIsEditProfilePopupOpen(true)}\n            onEditAvatar = {() => setIsEditAvatarPopupOpen(true)}\n            onAddPlace = {() => setIsAddPlacePopupOpen(true)}\n            onCardLike = {handleCardLike}\n            onCardDelete = {handleCardDeleteConfirm}\n            onCardClick = {handleCardClick}\n            cards = {cards}\n          />\n\n          <Footer />\n\n          <EditProfilePopup\n            isOpen = {isEditProfilePopupOpen}\n            onClose = {closeAllPopups}\n            onUpdateUser = {handleUpdateUser}\n            onOvelayClick = {closeAllPopups}\n          />\n\n          <EditAvatarPopup\n            isOpen = {isEditAvatarPopupOpen}\n            onClose = {closeAllPopups}\n            onUpdateAvatar = {handleUpdateAvatar}\n          />\n\n          <AddPlacePopup\n            isOpen = {isAddPlacePopupOpen}\n            onClose = {closeAllPopups}\n            onAddPlace = {handleAddPlaceSubmit}\n          />\n\n          <PopupWithForm\n            name=\"delete-card-confirm\"\n            title=\"Вы уверены?\"\n            isOpen = {isCardDeleteConfirmOpen.isOpen}\n            onClose = {closeAllPopups}\n            buttonText=\"Да\"\n            onSubmit = {(e) => {handleCardDelete(e, isCardDeleteConfirmOpen.cardToDelete)}}\n          />\n\n          <ImagePopup\n            {...selectedCard}\n            onClose = {closeAllPopups}\n          />\n\n        </CurrentUserContext.Provider>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\n\nReactDOM.render(\n\n    <App />\n  ,\n  document.getElementById('root')\n);\n\n//Благодарю за молниеносную проверку =)\n"],"sourceRoot":""}